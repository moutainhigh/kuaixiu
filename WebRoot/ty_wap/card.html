<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/card.css">
    <title>Title</title>
</head>
<body>
    <div class="card" id="card">
        <div class="message">
            <p>爱奇艺会员卡<span id="cardType"></span></p>
            <p>兑换码：  <span id="cardId"></span></p>
            <p>有效期至<span id="endTime"></span></p>
        </div>
        <div class="money">
            ￥<span id="money"></span>
        </div>
    </div>
    <script src="js/jquery.js"></script>
    <script src="js/common.js"></script>
    <script>
        $.post(
            "http://17t033o025.iok.la:46923//videoCard/personList.do",
            function(data){
                if(data.success){
                    var list = data.data;
                    var cardStr = ""
                    // console.log(list)
                    for(var i=0;i< list.length;i++){
                        var type = list[i].type
                        list[i].grayClass = ''
                        if(type === 1){
                            type='周卡';
                        }else  if(type === 2){
                            type='月卡';
                        }else  if(type === 3){
                            type ='季卡';
                        }else  if(type === 4){
                            type ='半年卡';
                        }else  if(type === 5){
                            type ='年卡';
                        }
                        var date = new Date(list[i].validityTime).getTime()
                        var time = new Date(list[i].validityTime)
                        var dateStr = time.getFullYear() + '年' + (Number(time.getMonth())+1) + '月' + time.getDate() + '日'
                        var currentDate = new Date().getTime()
                        // console.log(date)
                        // console.log(currentDate)
                        if(currentDate > date) {
                            list[i].grayClass = 'gray'
                        }
                        console.log(list[i])
                        cardStr +=
                            '<div class="card ' + list[i].grayClass +'" id="card">\n' +
                            '        <div class="message">\n' +
                            '            <p>爱奇艺会员卡<span id="cardType">' + type + '</span></p>\n' +
                            '            <p>兑换码：  <span id="cardId">'+ list[i].cardId +'</span></p>\n' +
                            '            <p>有效期至<span id="endTime">' + dateStr + '</span></p>\n' +
                            '        </div>\n' +
                            '        <div class="money">\n' +
                            '            ￥<span id="money">' + list[i].price + '</span>\n' +
                            '        </div>\n' +
                            '    </div>'


                    }
                    document.body.innerHTML = cardStr
                }
            }
        )
    </script>
</body>
</html>